use self_serve;

/*update page_template for queue*/
UPDATE `self_serve`.`page_template` SET `definition` = '{ \"schema\": { \"type\": \"object\", \"properties\": { \"tabsField\": { \"title\": \"\", \"type\": \"array\", \"items\": [ { \"title\": \"\", \"type\": \"object\", \"required\": [ \"queueName\", \"queueDesc\" ], \"properties\": { \"queueId\": { \"type\": \"string\", \"title\": \"Queue ID\" }, \"queueName\": { \"type\": \"string\", \"title\": \"Queue Name\", \"pattern\": \"^[0-9a-zA-Z._ -]+[0-9a-zA-Z._-]+$\", \"maxLength\": 50 }, \"queueDesc\": { \"type\": \"string\", \"title\": \"Queue Description\", \"pattern\": \"^[0-9a-zA-Z._ -]+$\" }, \"queueTags\": { \"title\": \"Assigned Tags\", \"type\": \"array\", \"items\": { \"type\": \"string\", \"anyOf\": [ { \"enum\": [], \"type\": \"string\", \"enumNames\": [] } ], \"title\": \"Not Selected\" } } } }, { \"title\": \"\", \"type\": \"object\", \"properties\": { \"assistConfig\": { \"title\": \"\", \"type\": \"object\", \"properties\": { \"skill\": { \"title\": \"Choose skills\", \"type\": \"array\", \"items\": { \"type\": \"string\", \"anyOf\": [ { \"enum\": [], \"type\": \"string\", \"enumNames\": [] } ], \"title\": \"Not Selected\" } }, \"queueType\": { \"title\": \"Queue Type\", \"type\": \"string\", \"pattern\": \"^[^\\\\0]+$\", \"enum\": [ \"\", \"LIVE_CHAT\", \"MESSAGING\" ], \"enumNames\": [ \"Select\", \"Live Chat\", \"Messaging\" ], \"default\": \"Live Chat\" }, \"visitorInactivity\": { \"title\": \"Visitor Inactivity Time (Seconds)\", \"type\": \"number\", \"default\": -1 }, \"agentResponse\": { \"title\": \"Agent Response Time (Seconds)\", \"type\": \"number\", \"default\": -1 }, \"dispositionForm\": { \"title\": \"Upload Disposition Form\", \"type\": \"string\", \"default\": \"\" }, \"typingEnabled\": { \"title\": \"Typing Feature Enabled\", \"type\": \"boolean\", \"enum\": [ true, false ], \"enumNames\": [ \"True\", \"False\" ], \"default\": true }, \"typingTimeout\": { \"title\": \"Typing Timeout (seconds)\", \"type\": \"number\", \"default\": 5 }, \"isAccountQueue\": { \"title\": \"Account Level Queue\", \"type\": \"boolean\", \"enum\": [ true, false ], \"enumNames\": [ \"True\", \"False\" ], \"default\": false }, \"fileTransfer\": { \"type\": \"object\", \"title\": \"File Transfer\", \"properties\": { \"FTVisitor\": { \"title\": \"File Transfer for Visitor\", \"type\": \"string\", \"pattern\": \"^[^\\\\0]+$\", \"enum\": [ \"\", \"DENY\", \"AUTOACCEPT\" ], \"enumNames\": [ \"Select\", \"Deny\", \"Auto Accept\" ], \"default\": \"Deny\" } } }, \"mailer\": { \"title\": \"Mailer\", \"type\": \"object\", \"properties\": { \"visitorConfig\": { \"title\": \"Visitor Mailer Configurations\", \"type\": \"string\", \"default\": \"DEFAULT\", \"pattern\": \"^[^\\\\0]+$\", \"enum\": [ \"\" ], \"enumNames\": [ \"Select\" ] }, \"agentConfig\": { \"title\": \"Agent Mailer Configurations\", \"default\": \"DEFAULT\", \"type\": \"string\", \"pattern\": \"^[^\\\\0]+$\", \"enum\": [ \"\" ], \"enumNames\": [ \"Select\" ] } } }, \"crmIntg\": { \"title\": \"CRM Integration\", \"type\": \"object\", \"properties\": { \"crmScriptContent\": { \"title\": \"CRM Script Content\", \"type\": \"string\", \"default\": \"\" }, \"crmLaunchBtn\": { \"title\": \"CRM Launch Button Label\", \"type\": \"string\", \"default\": \"\" }, \"crmAppId\": { \"title\": \"CRM App ID\", \"type\": \"string\", \"default\": \"\" } } }, \"interLob\": { \"title\": \"Inter LOB\", \"type\": \"object\", \"properties\": { \"outboundLob\": { \"title\": \" Enable Outbound transfer for LOB\", \"type\": \"boolean\", \"enum\": [ true, false ], \"enumNames\": [ \"True\", \"False\" ], \"default\": false }, \"acceptInterLob\": { \"title\": \"Accept InterLOB Chat\", \"type\": \"boolean\", \"enum\": [ true, false ], \"enumNames\": [ \"True\", \"False\" ], \"default\": false } } } }, \"dependencies\": { \"queueType\": { \"oneOf\": [ { \"properties\": { \"queueType\": { \"enum\": [ \"MESSAGING\" ] }, \"agentAffinityPeriod\": { \"title\": \"Agent Affinity Period (Minutes)\", \"type\": \"number\", \"default\": 120 }, \"conversationalInterval\": { \"title\": \"Conversational Interval (Hours)\", \"type\": \"number\", \"default\": 72 } } }, { \"properties\": { \"queueType\": { \"enum\": [ \"LIVE_CHAT\" ] }, \"queueLength\": { \"title\": \"Queue Length\", \"type\": \"number\", \"default\": 5 }, \"queueTimeOut\": { \"title\": \"Queue Timeout (seconds)\", \"type\": \"number\", \"default\": 120 }, \"routeOn\": { \"title\": \"Route On\", \"type\": \"string\", \"enum\": [ \"Dispose\", \"Terminate\" ], \"enumNames\": [ \"Dispose\", \"Terminate\" ], \"default\": \"Dispose\" }, \"coBrowse\": { \"type\": \"object\", \"title\": \"Co-Browsing\", \"properties\": { \"coViewEnabled\": { \"title\": \"Co-view Feature Enabled\", \"type\": \"boolean\", \"enum\": [ true, false ], \"enumNames\": [ \"True\", \"False\" ], \"default\": false }, \"coBrowseEnabled\": { \"title\": \"Co-browsing Feature Enabled\", \"type\": \"boolean\", \"enum\": [ true, false ], \"enumNames\": [ \"True\", \"False\" ], \"default\": false } } } } } ] } }, \"required\": [ \"queueType\" ] } } } ] } } }, \"uiSchema\": { \"tabsField\": { \"ui:options\": { \"type\": \"tabs\", \"size\": 12, \"hideTitle\": true, \"disableSeparator\": true, \"tabStyles\": { \"tabContainer\": { \"height\": \"50px\", \"margin\": \"-20px 0px 0px -20px\" } }, \"tabNames\": [ \"Base Configuration\", \"Assist Configuration\" ] }, \"items\": [ { \"queueId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"fieldSize\": [ 10, 11 ], \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueName\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"fieldSize\": [ 10, 11 ], \"tooltipTrigger\": \"hover\", \"validationError\": \"Unique Queue Name. Cannot be longer than 50 characters and . _ -  special characters are allowed\", \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueDesc\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"fieldSize\": [ 10, 11 ], \"tooltipTrigger\": \"hover\", \"validationError\": \"Describe the purpose of this queue and . _ - special characters are allowed\", \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueTags\": { \"ui:field\": \"multiselect\", \"ui:options\": { \"fieldSize\": [ 10, 11 ], \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, { \"assistConfig\": { \"ui:order\": [ \"skill\", \"queueType\", \"queueLength\", \"queueTimeOut\", \"routeOn\", \"agentAffinityPeriod\", \"conversationalInterval\", \"visitorInactivity\", \"agentResponse\", \"dispositionForm\", \"typingEnabled\", \"typingTimeout\", \"isAccountQueue\", \"fileTransfer\", \"mailer\", \"coBrowse\", \"crmIntg\", \"interLob\" ], \"ui:options\": { \"size\": 9, \"disableSeparator\": true }, \"skill\": { \"ui:field\": \"multiselect\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueType\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueLength\": { \"ui:field\": \"text\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"inputType\": \"number\", \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueTimeOut\": { \"ui:field\": \"text\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"inputType\": \"number\", \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"routeOn\": { \"ui:field\": \"select\", \"ui:options\": { \"inputType\": \"boolean\", \"fieldSize\": [ 10, 5 ], \"size\": 12, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"25px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"agentAffinityPeriod\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"number\", \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"conversationalInterval\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"number\", \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"visitorInactivity\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"number\", \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"agentResponse\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"number\", \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"dispositionForm\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"file\", \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"typingEnabled\": { \"ui:field\": \"select\", \"ui:options\": { \"inputType\": \"boolean\", \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"typingTimeout\": { \"ui:field\": \"text\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"inputType\": \"number\", \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"isAccountQueue\": { \"ui:field\": \"select\", \"ui:options\": { \"inputType\": \"boolean\", \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"fileTransfer\": { \"FTVisitor\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, \"mailer\": { \"visitorConfig\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"agentConfig\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, \"coBrowse\": { \"ui:options\": { \"disableSeparator\": true }, \"coViewEnabled\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"coBrowseEnabled\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"crmIntg\": { \"crmScriptContent\": { \"ui:field\": \"textarea\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"crmLaunchBtn\": { \"ui:field\": \"text\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"crmAppId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"30px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, \"interLob\": { \"outboundLob\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"acceptInterLob\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } } }, \"ui:options\": { \"disableSeparator\": true } } ] } }, \"viewUiSchema\": { \"tabsField\": { \"ui:options\": { \"type\": \"tabs\", \"size\": 12, \"hideTitle\": true, \"disableSeparator\": true, \"tabStyles\": { \"tabContainer\": { \"height\": \"50px\", \"margin\": \"-20px 0px 0px -20px\" } }, \"tabNames\": [ \"Base Configuration\", \"Assist Configuration\" ] }, \"items\": [ { \"queueId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 10, 11 ], \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueName\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"inputType\": \"text\", \"fieldSize\": [ 10, 11 ], \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueDesc\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"inputType\": \"text\", \"fieldSize\": [ 10, 11 ], \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueTags\": { \"ui:field\": \"multiselect\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 10, 11 ], \"size\": 8, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true, \"styles\": { \"paddingBottom\": \"20px\" } } }, { \"assistConfig\": { \"ui:order\": [ \"skill\", \"queueType\", \"queueLength\", \"queueTimeOut\", \"routeOn\", \"agentAffinityPeriod\", \"conversationalInterval\", \"visitorInactivity\", \"agentResponse\", \"dispositionForm\", \"typingEnabled\", \"typingTimeout\", \"isAccountQueue\", \"fileTransfer\", \"mailer\", \"coBrowse\", \"crmIntg\", \"interLob\" ], \"ui:options\": { \"size\": 9, \"disableSeparator\": true }, \"skill\": { \"ui:field\": \"multiselect\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueType\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueLength\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueTimeOut\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"routeOn\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 10, 5 ], \"size\": 12, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"25px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"agentAffinityPeriod\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"conversationalInterval\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"visitorInactivity\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"agentResponse\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"dispositionForm\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"inputType\": \"file\", \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"typingEnabled\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"typingTimeout\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"isAccountQueue\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"fileTransfer\": { \"FTVisitor\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, \"mailer\": { \"visitorConfig\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"agentConfig\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, \"coBrowse\": { \"ui:options\": { \"disableSeparator\": true }, \"coViewEnabled\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"coBrowseEnabled\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"30px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"crmIntg\": { \"crmScriptContent\": { \"ui:field\": \"textarea\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"crmLaunchBtn\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"crmAppId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"30px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } }, \"interLob\": { \"outboundLob\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"acceptInterLob\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginLeft\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } } }, \"ui:options\": { \"disableSeparator\": true } } ] } }, \"fetch\": { \"list\": { \"listTag\": \"tabsField.0.queueTags\", \"listSkill\": [ \"tabsField.1.assistConfig.skill\" ], \"mailerConfigKey\": [ \"tabsField.1.assistConfig.mailer.agentConfig\", \"tabsField.1.assistConfig.mailer.visitorConfig\" ] }, \"page\": \"updateQueues_p0\" } }' 
WHERE (`id` = 'updateQueues_p0');


-- queue action update
UPDATE `action` SET `definition` = '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"apikey\": \"KtbDtdYYb7EUD4oajYCM8l9Nh7L0AgEc\", \"Content-Type\": \"application/x-www-form-urlencoded\"}, \"serviceId\": \"ohs\", \"relativePath\": \"/v1/ohs/adminEntity/update?entity=${body}\", \"bodyDefinition\": {}, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) { var uiDataB = JSON.parse(pageData).updateQueues_p0.tabsField[ 0 ]; var uiDataA = JSON.parse(pageData).updateQueues_p0.tabsField[1].assistConfig; var apiData = [ { \\\"entityAttributes\\\": { \\\"queueName\\\": uiDataB.queueName, \\\"queueDesc\\\": uiDataB.queueDesc, \\\"queueType\\\": uiDataA.queueType }, \\\"entityBaseData\\\": { \\\"accountId\\\": accountId + \\\"-account-default\\\", \\\"clientId\\\": \\\"nemo-client-\\\" + clientId, \\\"entityDisplayName\\\": uiDataB.queueName, \\\"entityType\\\": \\\"queue\\\", \\\"entityId\\\": uiDataB.queueId } } ]; if (uiDataB.queueTags && uiDataB.queueTags.join(\\\",\\\") !== \\\"\\\") { apiData[ 0 ].entityAttributes.tags = uiDataB.queueTags.join(\\\",\\\") }; return JSON.stringify(apiData); }\"}' 
WHERE (`id` = '16');

UPDATE `action` SET `definition` = '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/x-www-form-urlencoded\"}, \"serviceId\": \"assist\", \"relativePath\": \"/en/admin/rest/ohs/update\", \"bodyDefinition\": {}, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) { var uiData = JSON.parse(pageData).updateQueues_p0.tabsField; var uiDataB = uiData[ 0 ]; var uiDataA = uiData[ 1 ].assistConfig; var apiData = [ { \\\"entityBaseData\\\": { \\\"accountId\\\": accountId + \\\"-account-default\\\", \\\"entityType\\\": \\\"chatQueue\\\", \\\"entityId\\\": uiDataB.queueId, \\\"entityDisplayName\\\": uiDataB.queueName }, \\\"entityAttributes\\\": { \\\"queueLength\\\": uiDataA.queueLength, \\\"queueTimeOut\\\": uiDataA.queueTimeOut, \\\"routeOn\\\": uiDataA.routeOn, \\\"conversationalInterval\\\": uiDataA.conversationalInterval, \\\"agentAffinityPeriod\\\": uiDataA.agentAffinityPeriod, \\\"visitorInactivityPeriod\\\": uiDataA.visitorInactivity, \\\"agentResponseTime\\\": uiDataA.agentResponse, \\\"typingEnabled\\\": uiDataA.typingEnabled, \\\"typingTimeout\\\": uiDataA.typingTimeout, \\\"isAccountQueue\\\": uiDataA.isAccountQueue, \\\"agentFTShare\\\": uiDataA.fileTransfer.FTVisitor, \\\"visitorMailerConfigKey\\\": uiDataA.mailer.visitorConfig, \\\"agentMailerConfigKey\\\": uiDataA.mailer.agentConfig, \\\"coViewEnabled\\\": uiDataA.coBrowse.coViewEnabled, \\\"coBrowseEnabled\\\": uiDataA.coBrowse.coBrowseEnabled, \\\"interLOBEnabled\\\": uiDataA.interLob.acceptInterLob, \\\"isOutboundLOBQueueTransferEnabled\\\": uiDataA.interLob.outboundLob, \\\"agentAffinityPeriod\\\": uiDataA.agentAffinityPeriod, \\\"conversationalInterval\\\": uiDataA.conversationalInterval, \\\"dispositionFormContent\\\": \\\"\\\", \\\"crmScriptContent\\\": uiDataA.crmIntg.crmScriptContent, \\\"crmDisplayText\\\": uiDataA.crmIntg.crmLaunchBtn, \\\"crmAppId\\\": uiDataA.crmIntg.crmAppId, \\\"isStandardWrapUpRequired\\\": \\\"false\\\", \\\"avgChatDuration\\\": \\\"10\\\", \\\"waitTimeBufferFactor\\\": \\\"1.0\\\", \\\"resourceFree\\\": \\\"DISPOSE\\\", \\\"chatDurationRefreshFactor\\\": \\\"3.0\\\" } } ]; if (uiDataA.skill && uiDataA.skill.join(\\\",\\\") !== \\\"\\\") { apiData[ 0 ].entityAttributes.skill = uiDataA.skill.join(\\\",\\\") }; return \\\"entity=\\\" + JSON.stringify(apiData); }\"}' 
WHERE (`id` = '14');


-- fetch config update for queue
UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(apiData) { var val = JSON.parse(JSON.parse(apiData).data.entity); var ea = val.entityAttributes; var ebd = val.entityBaseData; var uiData = { \\\"tabsField\\\": [ { \\\"queueList\\\": ebd.entityId, \\\"queueName\\\": ebd.entityDisplayName, \\\"queueId\\\": ebd.entityId, \\\"queueDesc\\\": ea.queueDesc, \\\"queueTags\\\": [] }, { \\\"assistConfig\\\": { \\\"queueType\\\": ea.queueType } } ] }; if (ea.tags && ea.tags.split(\\\",\\\") !== \\\"\\\") { uiData.tabsField[0].queueTags = ea.tags.split(\\\",\\\"); } return JSON.stringify(uiData); } \"}' 
WHERE (`id` = '11');

UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(apiData, entity) { var val = JSON.parse(JSON.parse(apiData).data.entity); var ea = val.entityAttributes; var ebd = val.entityBaseData; var uiData = { \\\"tabsField\\\": [ {}, { \\\"assistConfig\\\": { \\\"skill\\\": [], \\\"queueTimeOut\\\": Number(ea.queueTimeOut), \\\"queueLength\\\": Number(ea.queueLength), \\\"routeOn\\\": ea.routeOn, \\\"agentAffinityPeriod\\\": Number(ea.agentAffinityPeriod), \\\"conversationalInterval\\\": Number(ea.conversationalInterval), \\\"visitorInactivity\\\": Number(ea.visitorInactivityPeriod), \\\"agentResponse\\\": Number(ea.agentResponseTime), \\\"typingEnabled\\\": Boolean(ea.typingEnabled), \\\"typingTimeout\\\": Number(ea.typingTimeout), \\\"isAccountQueue\\\": Boolean(ea.isAccountQueue), \\\"fileTransfer\\\": { \\\"FTVisitor\\\": ea.agentFTShare }, \\\"mailer\\\": { \\\"visitorConfig\\\": isUndefinedOrNull(ea.visitorMailerConfigKey), \\\"agentConfig\\\": isUndefinedOrNull(ea.agentMailerConfigKey) }, \\\"coBrowse\\\": { \\\"coBrowseEnabled\\\": Boolean(ea.coBrowseEnabled), \\\"coViewEnabled\\\": Boolean(ea.coViewEnabled) }, \\\"crmIntg\\\": { \\\"crmScriptContent\\\": ea.crmScriptContent, \\\"crmLaunchBtn\\\": ea.crmDisplayText, \\\"crmAppId\\\": ea.crmAppId }, \\\"interLob\\\": { \\\"outboundLob\\\": Boolean(ea.isOutboundLOBQueueTransferEnabled), \\\"acceptInterLob\\\": Boolean(ea.interLOBEnabled) } } } ] }; if (ea.skill && ea.skill.split(\\\",\\\") !== \\\"\\\") { uiData.tabsField[1].assistConfig.skill = ea.skill.split(\\\",\\\"); }; return JSON.stringify(uiData); } function isUndefinedOrNull(obj) { if (obj === undefined || obj === null || obj === \\\"null\\\" || obj === NaN) { return undefined; } else return obj; }\"}' 
WHERE (`id` = '12');

INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) VALUES ('28', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'updateQueues_p0', '{}', '{\"contexts\": [\"clientId\", \"entity\"], \"constants\": {}}', '/en/rest/hierarchy/queue/${entity}/adf?responseContent=application/html', '{\"objectTranslator\": \"function translate(values, entity) { var uiData = { \\\"tabsField\\\": [ {}, { \\\"assistConfig\\\": {} } ] }; var apiData = JSON.parse(values).data; uiData.tabsField[ 1 ].assistConfig.dispositionForm = apiData.dispostionFormContent; return JSON.stringify(uiData); }\"}', 'JS', 'PAGE_DATA_VALUE', 'assist');


-- create queue schema change
UPDATE `activity_template` SET `entity_location` = '{\"CREATE\": \"createQueues_p0.tabsField.0.queueName\", \"UPDATE\": \"updateQueues_p0.tabsField.0.queueId\"}' 
WHERE (`id` = 'queues');

-- action for create queue
UPDATE `action` SET `definition` = '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"apikey\": \"KtbDtdYYb7EUD4oajYCM8l9Nh7L0AgEc\", \"Content-Type\": \"application/x-www-form-urlencoded\"}, \"serviceId\": \"ohs\", \"relativePath\": \"/v1/ohs/adminEntity/create?entity=${body}\", \"bodyDefinition\": {}, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) { var uiData = JSON.parse(pageData).createQueues_p0.tabsField; var uiDataB = uiData[0]; var apiData = [ { \\\"entityAttributes\\\": { \\\"queueName\\\": uiDataB.queueName, \\\"queueDesc\\\": uiDataB.queueDesc, \\\"queueType\\\": uiDataB.queueType }, \\\"entityBaseData\\\": { \\\"accountId\\\": accountId + \\\"-account-default\\\", \\\"clientId\\\": \\\"nemo-client-\\\" + clientId, \\\"entityDisplayName\\\": uiDataB.queueName, \\\"entityType\\\": \\\"queue\\\" } } ]; if (uiDataB.queueTags && uiDataB.queueTags.join(\\\",\\\") !== \\\"\\\") { apiData[ 0 ].entityAttributes.tags = uiDataB.queueTags.join(\\\",\\\") }; return JSON.stringify(apiData); }\"}' 
WHERE (`id` = '12');

UPDATE `page_template` SET `definition` = '{ \"schema\": { \"type\": \"object\", \"properties\": { \"tabsField\": { \"title\": \"\", \"type\": \"array\", \"items\": [ { \"title\": \"\", \"type\": \"object\", \"required\": [ \"queueName\", \"queueDesc\", \"queueType\" ], \"properties\": { \"queueName\": { \"type\": \"string\", \"title\": \"Queue Name\", \"pattern\": \"^[0-9a-zA-Z._ -]+[0-9a-zA-Z._-]+$\", \"maxLength\": 50 }, \"queueDesc\": { \"type\": \"string\", \"title\": \"Queue Description\", \"pattern\": \"^[0-9a-zA-Z._ -]+$\" }, \"queueType\": { \"title\": \"Queue Type\", \"type\": \"string\", \"pattern\": \"^[^\\\\0]+$\", \"enum\": [ \"\", \"LIVE_CHAT\", \"MESSAGING\" ], \"enumNames\": [ \"Select\", \"Live Chat\", \"Messaging\" ] }, \"queueTags\": { \"title\": \"Assigned Tags\", \"type\": \"array\", \"items\": { \"type\": \"string\", \"anyOf\": [ { \"enum\": [], \"type\": \"string\", \"enumNames\": [] } ], \"title\": \"Not Selected\" } } } } ] } } }, \"uiSchema\": { \"tabsField\": { \"ui:options\": { \"type\": \"tabs\", \"size\": 12, \"hideTitle\": true, \"disableSeparator\": true, \"tabStyles\": { \"tabContainer\": { \"height\": \"50px\", \"margin\": \"-20px 0px 0px -20px\" } }, \"tabNames\": [ \"Base Configuration\" ] }, \"items\": [ { \"queueName\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"fieldSize\": [ 6, 8 ], \"tooltipTrigger\": \"hover\", \"validationError\": \"Unique Queue Name. Cannot be longer than 50 characters and . _ -  special characters are allowed\", \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueDesc\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"fieldSize\": [ 6, 8 ], \"tooltipTrigger\": \"hover\", \"validationError\": \"Describe the purpose of this queue and . _ - special characters are allowed\", \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueType\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 6, 8 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueTags\": { \"ui:field\": \"multiselect\", \"ui:options\": { \"fieldSize\": [ 6, 8 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true } } ] } }, \"viewUiSchema\": { \"tabsField\": { \"ui:options\": { \"type\": \"tabs\", \"size\": 12, \"hideTitle\": true, \"disableSeparator\": true, \"tabStyles\": { \"tabContainer\": { \"height\": \"50px\", \"margin\": \"-20px 0px 0px -20px\" } }, \"tabNames\": [ \"Base Configuration\" ] }, \"items\": [ { \"queueName\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"isDisabled\": true, \"fieldSize\": [ 6, 8 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueDesc\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"isDisabled\": true, \"fieldSize\": [ 6, 8 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueType\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 6, 8 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"queueTags\": { \"ui:field\": \"multiselect\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 6, 8 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"ui:options\": { \"disableSeparator\": true, \"styles\": { \"paddingBottom\": \"20px\" } } } ] } }, \"fetch\": { \"list\": { \"listTag\": \"tabsField.0.queueTags\" }, \"page\": \"createQueues_p0\" } }' 
WHERE (`id` = 'createQueues_p0');


/* BugFix - Hoop Publish fail fix*/

UPDATE `page_template` SET `definition` = '{\"schema\": {\"type\": \"object\",\"properties\": {\"queues\": {\"type\": \"string\",\"title\": \"Queue Id\",\"default\": \"\"},\"queueName\": {\"type\": \"string\",\"title\": \"Queue Name\",\"default\": \"\"},\"timezone\": {\"enum\": [],\"type\": \"string\",\"title\": \"Time Zone\",\"enumNames\": []},\"supportweekdays\": {\"type\": \"array\",\"title\": \"Support Hours\",\"default\": [{\"slots\": [],\"openAllDay\": false},{\"slots\": [{\"end\": \"18:00\",\"start\": \"09:00\"}],\"openAllDay\": false},{\"slots\": [{\"end\": \"18:00\",\"start\": \"09:00\"}],\"openAllDay\": false},{\"slots\": [{\"end\": \"18:00\",\"start\": \"09:00\"}],\"openAllDay\": false},{\"slots\": [{\"end\": \"18:00\",\"start\": \"09:00\"}],\"openAllDay\": false},{\"slots\": [{\"end\": \"18:00\",\"start\": \"09:00\"}],\"openAllDay\": false},{\"slots\": [],\"openAllDay\": false}]},\"supportexceptionsSection\": {\"type\": \"object\",\"title\": \"\",\"properties\": {\"supportexceptions\": {\"type\": \"array\",\"default\": []}},\"description\": \"Mark the days when chat hours would be overridden either due to holiday or exceptional working hours\"}}},\"uiSchema\": {\"queues\": {\"ui:field\": \"text\",\"ui:options\": {\"inputType\": \"text\",\"hidden\": true,\"isDisabled\": true,\"fieldSize\": [6,8]}},\"queueName\": {\"ui:field\": \"text\",\"ui:options\": {\"inputType\": \"text\",\"isDisabled\": true,\"fieldSize\": [6,8]}},\"timezone\": {\"ui:field\": \"select\",\"ui:options\": {\"fieldSize\": [6,8]}},\"supportweekdays\": {\"ui:field\": \"supportweekdays\",\"ui:options\": {\"fieldSize\": [6,8]}},\"supportexceptionsSection\": {\"supportexceptions\": {\"ui:field\": \"supportexceptions\",\"ui:options\": {\"fieldSize\": [6,8]}}}},\"viewUiSchema\": {\"queues\": {\"ui:field\": \"text\",\"ui:options\": {\"inputType\": \"text\",\"hidden\": true,\"isDisabled\": true,\"fieldSize\": [6,8]}},\"queueName\": {\"ui:field\": \"text\",\"ui:options\": {\"inputType\": \"text\",\"isDisabled\": true,\"fieldSize\": [6,8]}},\"timezone\": {\"ui:field\": \"select\",\"ui:options\": {\"isDisabled\": true,\"fieldSize\": [6,8]}},\"supportweekdays\": {\"ui:field\": \"supportweekdays\",\"ui:options\": {\"isDisabled\": true,\"fieldSize\": [6,8]}},\"supportexceptionsSection\": {\"supportexceptions\": {\"ui:field\": \"supportexceptions\",\"ui:options\": {\"isDisabled\": true,\"fieldSize\": [6,8]}}}},\"fetch\": {\"list\": {\"listTimezone\": \"timezone\"},\"page\": \"chathours_p0\"}}'
WHERE (`id` = 'chathours_p0');

UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(apiData){var uiData = {\\\"queues\\\":\\\"\\\", \\\"queueName\\\":\\\"\\\"}; try{var val = JSON.parse(JSON.parse(apiData).data.entity);uiData.queueName = val.entityBaseData.entityDisplayName; uiData.queues = val.entityBaseData.entityId;}catch(e){} return JSON.stringify(uiData);}\"}'
WHERE (`id` = '27');
