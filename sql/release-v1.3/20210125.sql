-- sql patch for smart response screen

use self_serve;

INSERT INTO `node` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `node_id`, `node_type`, `parent_id`) 
VALUES ('26', 'default.user', '2020-08-24 12:24:46.000000', 'default.user', '2020-08-24 12:24:46.000000', 'smartResponse', 'WORKFLOW', '6');

INSERT INTO `entity_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `name`) 
VALUES ('17', 'default.user', '2020-08-24 09:24:46.000000', 'default.user', '2020-08-24 09:24:46.000000', 'listSmartResponses', 'Smart Responses');

INSERT INTO `activity_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `description`, `entity_location`, `model`, `promotion_approval`, `title`, `type`, `ui_schema`, `entity_template_id`, `configs`) 
VALUES ('smartResponse', 'default.user', '2020-08-24 09:24:46.000000', 'default.user', '2020-08-24 09:24:46.000000', 'Smart Response', '{\"CREATE\": \"createSmartResponse_p0.accountId\", \"UPDATE\": \"updateSmartResponse_p0.accountId\"}', 'MENU', b'1', 'Smart Response', 'NON_SINGLETON', '{\"menuGroupName\": \"nav\", \"icon\":\"\", \"toolTip\":\"\", \"dashboard\":true, \"display_order\":1, \"isActive\":true}', '17', '{\"publishType\": \"DEFAULT\"}');

INSERT INTO `page_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `description`, `title`, `type`) 
VALUES ('createSmartResponse_p0', 'default.user', '2020-08-24 09:24:46.000000', 'default.user', '2020-08-24 09:24:46.000000', '{ \"schema\": { \"type\": \"object\", \"properties\": { \"accountId\": { \"type\": \"string\", \"title\": \"\" }, \"uploadKey\": { \"title\": \"\", \"type\": \"array\", \"default\": [ \"uploadFile\" ] }, \"stepOne\": { \"type\": \"object\", \"title\": \"Step - 01\", \"properties\": { \"textOne\": { \"type\": \"string\", \"title\": \"Download the existing mapping of smart responses in excel format using “Download Template” Button.\", \"default\": \"\" }, \"template\": { \"title\": \"\", \"type\": \"string\", \"default\": \"\" } } }, \"stepTwo\": { \"type\": \"object\", \"title\": \"Step - 02\", \"properties\": { \"textTwo\": { \"type\": \"string\", \"title\": \"In the “Smart Responses” sheet of downloaded excel file, update (edit or delete or add) the smart responses by following the instructions in “Instructions” sheet in the downloaded excel file.\" } } }, \"stepThree\": { \"type\": \"object\", \"title\": \"Step - 03\", \"properties\": { \"textThree\": { \"type\": \"string\", \"title\": \"Select the updated the excel file using the “browse” button & update the new smart responses by clicking on “Publish to Test” button.\", \"default\": \"\" } } }, \"uploadFile\": { \"title\": \"\", \"type\": \"string\", \"default\": \"\" } } }, \"uiSchema\": { \"accountId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"styles\": { \"container\": { \"display\": \"none\" }, \"label\": {}, \"field\": {} } } }, \"uploadKey\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"styles\": { \"container\": { \"display\": \"none\" }, \"label\": {}, \"field\": {} } } }, \"stepOne\": { \"textOne\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"fieldSize\": [ 12, 12 ], \"size\": 6, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"20px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"template\": { \"ui:field\": \"button\", \"ui:options\": { \"fieldSize\": [ 0, 12 ], \"size\": 6, \"type\": \"secondary\", \"textStyles\": { \"fontSize\": 13, \"fontWeight\": \"bold\" }, \"displayName\": \"Download Template\" } } }, \"stepTwo\": { \"textTwo\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"stepThree\": { \"textThree\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"uploadFile\": { \"ui:field\": \"text\", \"ui:options\": { \"fileReadType\": \"binaryString\", \"mediaType\": \"excel\", \"inputType\": \"file\", \"displayValue\": \"fileName\", \"inputFileButtonText\": \"BROWSE\", \"showDownloadButton\": false, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"viewUiSchema\": { \"accountId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"styles\": { \"container\": { \"display\": \"none\" }, \"label\": {}, \"field\": {} } } }, \"uploadKey\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"styles\": { \"container\": { \"display\": \"none\" }, \"label\": {}, \"field\": {} } } }, \"stepOne\": { \"textOne\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 12, 12 ], \"size\": 6, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"20px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"template\": { \"ui:field\": \"button\", \"ui:options\": { \"fieldSize\": [ 0, 12 ], \"isDisabled\": true, \"size\": 6, \"type\": \"secondary\", \"textStyles\": { \"fontSize\": 13, \"fontWeight\": \"bold\" }, \"displayName\": \"Download Template\" } } }, \"stepTwo\": { \"textTwo\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"stepThree\": { \"textThree\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"uploadFile\": { \"ui:field\": \"text\", \"ui:options\": { \"fileReadType\": \"binaryString\", \"mediaType\": \"excel\", \"inputType\": \"file\", \"displayValue\": \"fileName\", \"inputFileButtonText\": \"BROWSE\", \"showDownloadButton\": false, \"fieldSize\": [ 12, 12 ], \"size\": 10, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"fetch\": { \"page\": \"createSmartResponse_p0\" }, \"validation\": { \"enabled\": true, \"type\": \"onchange\" } }', 'Smart response', 'Smart Response', 'CREATE');

INSERT INTO `page_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `description`, `title`, `type`) 
VALUES ('updateSmartResponse_p0', 'default.user', '2020-08-24 09:24:46.000000', 'default.user', '2020-08-24 09:24:46.000000', '{ \"schema\": { \"type\": \"object\", \"properties\": { \"id\": { \"type\": \"string\" }, \"scope\": { \"title\": \"Scope\", \"type\": \"string\", \"enum\": [ \"account\" ], \"enumNames\": [ \"Account\" ], \"default\": \"Account\" }, \"scopeId\": { \"title\": \"Scope ID\", \"type\": \"string\", \"default\": \"\" }, \"tags\": { \"title\": \"Tags\", \"type\": \"string\", \"default\": \"\" }, \"responseText\": { \"title\": \"Response Text\", \"type\": \"string\", \"default\": \"\" } } }, \"uiSchema\": { \"id\": { \"ui:field\": \"text\", \"ui:options\": { \"hidden\": true, \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": {}, \"label\": {}, \"field\": {} } } }, \"scope\": { \"ui:field\": \"select\", \"ui:options\": { \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"scopeId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": { \"fontWeight\": \"normal\", \"border\": \"1px solid rgb(220, 225, 232)\", \"borderRadius\": 2, \"height\": 40, \"margin\": 0, \"padding\": 8, \"cursor\": \"not-allowed\", \"background-color\": \"rgb(235,235,228)\", \"opacity\": 1, \"line-height\": 24 } } } }, \"tags\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"fieldSize\": [ 7, 7 ], \"tooltipTrigger\": \"hover\", \"validationError\": \"Unique Tag Name. Cannot be longer than 50 characters and . _ - special characters are allowed\", \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"responseText\": { \"ui:field\": \"textarea\", \"ui:options\": { \"placeholder\": \"Enter Text\", \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"viewUiSchema\": { \"id\": { \"ui:field\": \"text\", \"ui:options\": { \"hidden\": true, \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": {}, \"label\": {}, \"field\": {} } } }, \"scope\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginRight\": \"10px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"scopeId\": { \"ui:field\": \"plaintext\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": { \"fontWeight\": \"normal\", \"border\": \"1px solid rgb(220, 225, 232)\", \"borderRadius\": 2, \"height\": 40, \"margin\": 0, \"padding\": 8, \"cursor\": \"not-allowed\", \"background-color\": \"rgb(235,235,228)\", \"opacity\": 1, \"line-height\": 24 } } } }, \"tags\": { \"ui:field\": \"text\", \"ui:options\": { \"isDisabled\": true, \"inputType\": \"text\", \"fieldSize\": [ 7, 7 ], \"tooltipTrigger\": \"hover\", \"validationError\": \"Unique Tag Name. Cannot be longer than 50 characters and . _ - special characters are allowed\", \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"responseText\": { \"ui:field\": \"textarea\", \"ui:options\": { \"isDisabled\": true, \"placeholder\": \"Enter Text\", \"fieldSize\": [ 7, 7 ], \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"fetch\": { \"page\": \"updateSmartResponse_p0\" }, \"validation\": { \"enabled\" :true, \"type\" : \"onchange\" } }', 'Smart response update', 'update Smart Response', 'UPDATE');

INSERT INTO `activity_page` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `page_order`, `section_name`, `page_template_id`, `activity_template_id`) 
VALUES ('32', 'default.user', '2020-07-28 09:24:46.000000', 'default.user', '2020-07-28 09:24:46.000000', '1', '', 'createSmartResponse_p0', 'smartResponse');

INSERT INTO `activity_page` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `page_order`, `section_name`, `page_template_id`, `activity_template_id`) 
VALUES ('33', 'default.user', '2020-07-28 09:24:46.000000', 'default.user', '2020-07-28 09:24:46.000000', '1', '', 'updateSmartResponse_p0', 'smartResponse');

INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) 
VALUES ('52', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'createSmartResponse_p0', '{}', '{\"contexts\": [\"accountId\"], \"constants\": {}}', '/actuator/health', '{\"objectTranslator\": \"function translate(values, entity, context) { try { context  = JSON.parse(context); var uiData = { \\\"accountId\\\": context.accountId }; } catch (e) {} return JSON.stringify(uiData); }\"}', 'JS', 'PAGE_DATA_VALUE', 'self');

INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) 
VALUES ('53', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'listSmartResponses', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\"], \"constants\": {}}', '/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/smartresponse', '{\"objectTranslator\": \"function translate(values){ values = JSON.parse(values); var items = values.data.items; var entities = []; items.forEach(function(item){entities.push({name:item.key, label:item.smartresponseText});} ) ;return JSON.stringify(entities); }\"}', 'JS', 'ENTITY_LISTING', 'assist');

INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) 
VALUES ('54', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'updateSmartResponse_p0', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\"], \"constants\": {}}', '/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/smartresponse', '{\"objectTranslator\": \"function translate(values, entity) { values = JSON.parse(values).data.items[entity]; var uiData = { \\\"id\\\": values.smartResponseId, \\\"scope\\\": values.scope, \\\"scopeId\\\": values.scopeId, \\\"tags\\\": values.tags, \\\"responseText\\\": values.smartresponseText, }; return JSON.stringify(uiData); }\"}', 'JS', 'PAGE_DATA_VALUE', 'assist');
