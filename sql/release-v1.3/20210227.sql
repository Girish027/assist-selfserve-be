/*SESSION TIMEOUT*/

use self_serve;

INSERT INTO `node` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `node_id`, `node_type`, `parent_id`)
 VALUES ('34', 'default.user', '2020-10-15 12:24:46.000000', 'default.user', '2020-10-15 12:24:46.000000', 'sessiontimeout', 'WORKFLOW', '7');

INSERT INTO `entity_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `name`) VALUES
('20','default.user','2019-08-08 14:17:12.404294','default.user','2019-08-08 14:17:12.404294','listsessiontimeout','Session Timeout');

INSERT INTO `activity_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `description`, `entity_location`, `model`, `promotion_approval`, `title`, `type`, `ui_schema`, `entity_template_id`, `configs`) VALUES ('sessiontimeout', 'default.user', '2019-08-07 16:23:27.677031', 'default.user', '2019-08-07 16:23:27.677031', 'Session Timeout', '{\"CREATE\": {\"entityIdLocation\": \"createSessionTimeout_p0.expression\", \"entityLabelLocation\": \"createSessionTimeout_p0.expression\"}, \"UPDATE\": {\"entityIdLocation\": \"updateSessionTimeout_p0.key\", \"entityLabelLocation\": \"updateSessionTimeout_p0.expression\"}}', 'MENU', 1, 'Session Timeout', 'NON_SINGLETON', '{\"menuGroupName\": \"nav\", \"icon\":\"\", \"toolTip\":\"\", \"dashboard\":true, \"display_order\":1, \"isActive\":true, \"uiOptions\": {\"entityList\": {\"entityHeader\": {\"label\": \"Expression\",\"secondaryLabel\": \"Timeout\"}}}}', '20', '{\"publishType\": \"DEFAULT\", \"preFetchInputValidation\": \"[^A-Za-z0-9-_ . ,:()=|&\\\"!]\"}');

INSERT INTO `action` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `definition_type`, `description`, `type`, `response_definition`, `configs`) VALUES ('46', 'default.user', '2020-10-16 13:13:15.527428', 'Arul.Abirami.S@247-inc.com', '2021-03-04 13:58:22.473745', '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/x-www-form-urlencoded\", \"GenerateAuthToken\": \"Bearer\"}, \"serviceId\": \"assist\", \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/timeoutconfig/update\", \"bodyDefinition\": {}, \"requestBodyKey\": \"entityObj\", \"restClientType\": \"REST_TEMPLATE\", \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) { pageData = JSON.parse(pageData).updateSessionTimeout_p0; var profileId = \\\"timeout_\\\"; var apiData = {}; apiData.key = pageData.key; apiData.expression = pageData.expression; apiData.profileId = profileId.concat(pageData.timeout); return JSON.stringify(apiData); }\", \"preFetchDefinition\": null}', 'UPDATE', 'Update Session Timeout Configuration', 'REST', '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Error while processing your request\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.expression); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Error while processing your request\'); } } \"}', '{}');

INSERT INTO `action` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `definition_type`, `description`, `type`, `response_definition`, `configs`) VALUES ('45', 'default.user', '2020-10-16 13:13:15.527428', 'Arul.Abirami.S@247-inc.com', '2021-03-04 13:54:05.932123', '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/x-www-form-urlencoded\", \"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/timeoutconfig\", \"bodyDefinition\": {}, \"requestBodyKey\": \"entityObj\", \"restClientType\": \"REST_TEMPLATE\", \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) { pageData = JSON.parse(pageData).createSessionTimeout_p0; var profileId = \\\"timeout_\\\"; var apiData = {}; apiData.key = pageData.key; apiData.expression = pageData.expression; apiData.profileId = profileId.concat(pageData.timeout); return JSON.stringify(apiData); }\", \"preFetchDefinition\": null}', 'CREATE', 'Create Session Timeout Configuration', 'REST', '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Error while processing your request\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.expression); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Error while processing your request\'); } } \"}', '{}');

INSERT INTO `action_workflow` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `action_id`, `activity_template_id`) VALUES ('54', 'default.user', '2019-08-27 17:44:15.136579', 'default.user', '2019-08-27 17:44:15.136579', '45', 'sessiontimeout');

INSERT INTO `action_workflow` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `action_id`, `activity_template_id`) VALUES ('49', 'default.user', '2019-08-27 17:44:15.136579', 'default.user', '2019-08-27 17:44:15.136579', '46', 'sessiontimeout');

INSERT INTO `page_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `description`, `title`, `type`) VALUES ('createSessionTimeout_p0', 'default.user', '2020-10-15 11:34:33.713766', 'Arul.Abirami.S@247-inc.com', '2021-02-17 15:45:59.162740', '{ \"schema\": { \"type\": \"object\", \"properties\": { \"banner\": { \"type\": \"string\" }, \"key\": { \"type\": \"string\", \"default\": \"\" }, \"expression\": { \"type\": \"string\", \"title\": \"SESSION_TIMEOUT_EXPRESSION_TITLE\" }, \"timeout\": { \"type\": \"string\", \"title\": \"SESSION_TIMEOUT_TITLE\", \"enum\": [ \"30\", \"60\", \"120\", \"180\", \"300\" ], \"enumNames\": [ \"30\", \"60\", \"120\", \"180\", \"300\" ], \"default\": \"30\" } } }, \"uiSchema\": { \"banner\": { \"ui:field\": \"infobanner\", \"ui:options\": { \"size\": 10, \"bannerTitle\": \"SESSION_TIMEOUT_INFOBANNER_TITLE\", \"bannerDescription\": \"SESSION_TIMEOUT_INFOTEXT\" } }, \"key\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"hidden\": true, \"fieldSize\": [ 8, 8 ], \"size\": 12, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"expression\": { \"ui:field\": \"ruleBuilder\", \"ui:options\": { \"fieldSize\": [ 8, 8 ], \"RuleBuilderTitle\": \"Expression Builder\", \"RuleBuilderDescription\": \"SESSION_TIMEOUT_BUILDER_DESCRIPTION\", \"isDisabled\": false, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginTop\": \"-15px\" }, \"label\": { \"marginBottom\": \"8px\", \"marginTop\": \"-29px\" }, \"field\": {} } } }, \"timeout\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": false, \"fieldSize\": [ 8, 8 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"viewUiSchema\": { \"banner\": { \"ui:field\": \"infobanner\", \"ui:options\": { \"size\": 10, \"bannerTitle\": \"SESSION_TIMEOUT_INFOBANNER_TITLE\", \"bannerDescription\": \"SESSION_TIMEOUT_INFOTEXT\" } }, \"key\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"hidden\": true, \"fieldSize\": [ 8, 8 ], \"size\": 12, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"expression\": { \"ui:field\": \"ruleBuilder\", \"ui:options\": { \"fieldSize\": [ 8, 8 ], \"RuleBuilderTitle\": \"Expression Builder\", \"RuleBuilderDescription\": \"SESSION_TIMEOUT_BUILDER_DESCRIPTION\", \"isDisabled\": true, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginTop\": \"-15px\" }, \"label\": { \"marginBottom\": \"8px\", \"marginTop\": \"-29px\" }, \"field\": {} } } }, \"timeout\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 8, 8 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"fetch\": { \"page\": \"createSessionTimeout_p0\", \"list\": { \"listProperty\": \"expression\" } }, \"validation\": null }', 'Session Timeout', 'Create Session Timeout', 'CREATE');
INSERT INTO `page_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `description`, `title`, `type`) VALUES ('updateSessionTimeout_p0', 'default.user', '2020-10-15 11:34:33.713766', 'Arul.Abirami.S@247-inc.com', '2021-02-17 00:20:25.669857', '{ \"schema\": { \"type\": \"object\", \"properties\": { \"key\": { \"type\": \"string\", \"default\": \"\" }, \"expression\": { \"type\": \"string\", \"title\": \"SESSION_TIMEOUT_EXPRESSION_TITLE\" }, \"timeout\": { \"type\": \"string\", \"title\": \"SESSION_TIMEOUT_TITLE\", \"enum\": [ \"30\", \"60\", \"120\", \"180\", \"300\" ], \"enumNames\": [ \"30\", \"60\", \"120\", \"180\", \"300\" ], \"default\": \"30\" } } }, \"uiSchema\": { \"key\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"isDisabled\": true, \"hidden\": true, \"fieldSize\": [ 8, 8 ], \"size\": 12, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"expression\": { \"ui:field\": \"ruleBuilder\", \"ui:options\": { \"fieldSize\": [ 8, 8 ], \"RuleBuilderTitle\": \"Expression Builder\", \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginTop\": \"-15px\" }, \"label\": { \"marginBottom\": \"8px\", \"marginTop\": \"-29px\" }, \"field\": {} } } }, \"timeout\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": false, \"fieldSize\": [ 8, 8 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"viewUiSchema\": { \"key\": { \"ui:field\": \"text\", \"ui:options\": { \"inputType\": \"text\", \"isDisabled\": true, \"hidden\": true, \"fieldSize\": [ 8, 8 ], \"size\": 12, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } }, \"expression\": { \"ui:field\": \"ruleBuilder\", \"ui:options\": { \"fieldSize\": [ 8, 8 ], \"RuleBuilderTitle\": \"Expression Builder\", \"isDisabled\": true, \"styles\": { \"container\": { \"marginBottom\": \"15px\", \"marginTop\": \"-15px\" }, \"label\": { \"marginBottom\": \"8px\", \"marginTop\": \"-29px\" }, \"field\": {} } } }, \"timeout\": { \"ui:field\": \"select\", \"ui:options\": { \"isDisabled\": true, \"fieldSize\": [ 8, 8 ], \"size\": 5, \"styles\": { \"container\": { \"marginBottom\": \"15px\" }, \"label\": { \"marginBottom\": \"8px\" }, \"field\": {} } } } }, \"fetch\": { \"page\": \"updateSessionTimeout_p0\", \"list\": { \"listProperty\": \"expression\" } }, \"validation\": null }', 'Session Timeout', 'Update Session Timeout', 'UPDATE');

INSERT INTO `activity_page` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `page_order`, `section_name`, `page_template_id`, `activity_template_id`, `entity_location`) VALUES
('38','default.user','2020-10-15 14:08:14.129995','default.user','2020-10-15 14:08:14.129995',1,'','createSessionTimeout_p0','sessiontimeout',NULL),
('39','default.user','2020-10-15 16:35:09.859460','default.user','2020-10-15 16:35:09.859460',1,'','updateSessionTimeout_p0','sessiontimeout',NULL);

INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) VALUES ('63', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'listProperty', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\"], \"constants\": {}}', '/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/propertyconfiguration', '{\"objectTranslator\": \"function translate(values){ values = JSON.parse(values); var items = values.data.items; var properties={enum:[\\\"\\\"], enumNames:[\\\"Select\\\"]}; try{ items.forEach(function (item){ properties.enum.push(item.key); properties.enumNames.push(item.varName); }) }    catch(e){} return JSON.stringify(properties); }\"}', 'JS', 'FIELD_OPTIONS', 'assist');
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) VALUES ('62', 'default.user', '2020-10-15 12:24:56.000000', 'default.user', '2020-10-15 12:24:56.000000', 'listsessiontimeout', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\"], \"constants\": {}}', '/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/timeoutconfig', '{\"objectTranslator\": \"function translate(values){ values = JSON.parse(values); var items = values.data.items; var entities = []; items.forEach(function(item){entities.push({name:item.key, label:item.expression, secondaryLabel:item.timeOut});} ); return JSON.stringify(entities); }\"}', 'JS', 'ENTITY_LISTING', 'assist');
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`) VALUES ('61', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'updateSessionTimeout_p0', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\", \"entity\"], \"constants\": {}}', '/en/hierarchy/rest/clients/nemo-client-${clientId}/accounts/${accountId}-account-default/timeoutconfig/${entity}', '{\"objectTranslator\": \"function translate(values) { values = JSON.parse(values);var uiData = { \\\"key\\\": values.key,\\\"expression\\\": values.expression, \\\"timeout\\\": values.timeOut}; return JSON.stringify(uiData); }\"}', 'JS', 'PAGE_DATA_VALUE', 'assist');
