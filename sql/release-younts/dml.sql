use `self_serve`;

-- CENTRAL 7863: Fix for blacklisted activities in filters
UPDATE `clients_config` SET `values` = '[\"accountConfig\", \"activeCards\", \"authorisedUrls\", \"maskingPatterns\", \"keywordAlerts\", \"leadConsole\", \"mailer\", \"passwordPolicy\", \"propertyConfig\", \"propertyValidation\", \"sessiontimeout\", \"smartResponse\", \"userTest\", \"userLive\"]'
WHERE (`id` = '30');
UPDATE `clients_config` SET `values` = '[\"accountConfig\", \"activeCards\", \"authorisedUrls\", \"maskingPatterns\", \"keywordAlerts\", \"leadConsole\", \"mailer\", \"passwordPolicy\", \"propertyConfig\", \"propertyValidation\", \"sessiontimeout\", \"smartResponse\", \"userTest\", \"userLive\"]'
WHERE (`id` = '28');
UPDATE `clients_config` SET `values` = '[\"accountConfig\", \"activeCards\", \"authorisedUrls\", \"maskingPatterns\", \"keywordAlerts\", \"leadConsole\", \"mailer\", \"passwordPolicy\", \"propertyConfig\", \"propertyValidation\", \"sessiontimeout\", \"smartResponse\"]'
WHERE (`id` = '32');


-- CENTRAL-7614: Implementations story for OKTA authorizations in CSS-BE
UPDATE `service_urls` SET `baseurl` = 'http://localhost:8090/self-serve' WHERE (`id` = '11');
UPDATE `service_urls` SET `baseurl` = 'http://localhost:8090/self-serve' WHERE (`id` = '14');


-- bugfixes
UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(values){values = JSON.parse(values); values.scope = {} ;if(values.scopeType === \'queue\'){values.scope.queueScope = values.scopeId;}else{values.scope.accountId=values.scopeId;} values.scope.scopeType = values.scopeType;values.propertyType = values.varGroup;values.order = values.order; values.editableFlag = values.editableFlag.toString(); values.mandatoryFlag = values.mandatoryFlag.toString(); values.maskableFlag =values.maskableFlag.toString();if( values.validatorId !== undefined){values.propertyType = values.validatorId;}else{values.propertyType = \'\';}; return JSON.stringify(values)}\"}' 
WHERE (`id` = '37');
UPDATE `action` SET `definition` = '{ \"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/x-www-form-urlencoded\", \"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/nemo-client-${componentClientId}/accounts/${componentAccountId}-account-default/validator?entityObj=${body}\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env, prefetch) { var apiData = JSON.parse(pageData).createPropertyValidation_p0; apiData.key=\\\"\\\"; if(!apiData.validatorRule) {apiData.validatorRule=\\\"\\\"} if(!apiData.enumValues || apiData.enumValues.length==0) {apiData.enumValues=[\\\"\\\"]}  return JSON.stringify(apiData); }\", \"preFetchDefinition\": {}}'
WHERE (`id` = '43');


-- CENTRAL-7859: update action response message
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\"){ return new ApiResponse(uiData.status, uiData.status); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '1');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \'SUCCESS\' && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '3');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '4');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '5');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \'SUCCESS\' && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '8');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \'SUCCESS\' && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '9');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '12');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \'SUCCESS\' ){ return new ApiResponse(uiData.status); } else { return new ApiResponse(\'ERROR\',\'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '13');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '14');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \'SUCCESS\' ){ return new ApiResponse(uiData.status); } else { return new ApiResponse(\'ERROR\', \'Failed to publish the activity! Please try again or contact the Administrator, if the issue persists!\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish the activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '15');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '16');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '17');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \\\"SUCCESS\\\" && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(\\\"ERROR\\\", parseMsg(uiData.errorMessage)); } }catch(e){ return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } function parseMsg(msg) { var retVal=msg||\\\"\\\"; if(msg.indexOf(\\\"Heuristic\\\")!=-1){retVal= \\\"Entity that you are trying to map is not available in the target environment. Please ensure the mapped entities are published to the target environment.\\\";} else if(msg.indexOf(\\\"entity.invalid.id\\\")!=-1){ retVal=\\\"Entity that you are trying to update is not available in the target environment. Contact [24]7.ai support team.\\\";} return retVal;} \"}' 
WHERE (`id` = '18');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.policyId){ return new ApiResponse(uiData.status, \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '19');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.policyId){ return new ApiResponse(uiData.status, \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '20');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.policyId){ return new ApiResponse(uiData.status, \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '21');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.policyId){ return new ApiResponse(uiData.status, \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '22');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.commandId); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '23');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\',uiData.commandId); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '24');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'\'); } else { return new ApiResponse(uiData.status, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '25');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'\' ); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '26');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '27');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'\' ); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '28');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '29');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\',uiData.key); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '30');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '31');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '32');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '33');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'\'); } else { return new ApiResponse(uiData.status, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '34');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.status == \'SUCCESS\' && uiData.data != null){ return new ApiResponse(uiData.status, uiData.data.entityId); } else { return new ApiResponse(uiData.status, uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '35');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.key){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(\'ERROR\', uiData.errorMsg); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '36');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.key){ return new ApiResponse(\'SUCCESS\', \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMsg); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '37');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.key){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(\'ERROR\', uiData.errorMsg); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '38');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.key){ return new ApiResponse(\'SUCCESS\', \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMsg); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } }\"}' 
WHERE (`id` = '39');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.description){ return new ApiResponse(\'SUCCESS\', uiData.key); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '40');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(JSON.parse(responseData).data.entity);  if(uiData != null && uiData.entityAttributes.id){ return new ApiResponse(uiData.status, uiData.entityAttributes.id); } else { return new ApiResponse(uiData.status, uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '41');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.validatorId){ return new ApiResponse(\'SUCCESS\', uiData.validatorId); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '42');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.validatorId){ return new ApiResponse(\'SUCCESS\', uiData.validatorId); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '43');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null && uiData.key){ return new ApiResponse(uiData.status, \'\'); } else { return new ApiResponse(\'ERROR\', uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '44');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.expression); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '45');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', uiData.expression); } else { return new ApiResponse(uiData.errorCode, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '46');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function (_status, _message) { this.status = _status; this.message = _message; }; function translate(responseData) { try { var uiData = JSON.stringify(responseData); if (uiData.indexOf(\\\"true\\\") > -1) { return new ApiResponse(\\\"SUCCESS\\\", \\\"\\\"); } else { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '47');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function (_status, _message) { this.status = _status; this.message = _message; }; function translate(responseData, responseCode) { try { if (responseCode == 200) { return new ApiResponse(\\\"SUCCESS\\\", \\\"Reset password is successful\\\"); } else { return new ApiResponse(\\\"ERROR\\\", \\\"Reset password unsuccessful, Error: \\\"+ JSON.parse(responseData).errorMessage); } } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '48');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function (_status, _message) { this.status = _status; this.message = _message; }; function translate(responseData, responseCode) { try { if (responseCode == 304 || responseCode == 200) { return new ApiResponse(\\\"SUCCESS\\\", \\\"Reset password is successful\\\"); } else { return new ApiResponse(\\\"ERROR\\\", \\\"Reset password unsuccessful, Error: \\\"+ JSON.parse(responseData).errorMessage); } } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '49');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'\'); } else { return new ApiResponse(uiData.status, uiData.errorMessage||\'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '50');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(JSON.parse(responseData).data.entity);  if(uiData != null && uiData.entityAttributes.id){ return new ApiResponse(uiData.status, uiData.entityAttributes.id); } else { return new ApiResponse(uiData.status, uiData.errorMessage); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}' 
WHERE (`id` = '51');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try { var response = JSON.parse(responseData); if(response.Error !== undefined) { return new ApiResponse(\\\"ERROR\\\", response.Error); } if (response.errorCode !== undefined) { return new ApiResponse(\\\"ERROR\\\", response.errorMessage); } return new ApiResponse(\\\"SUCCESS\\\", response.uploadId); } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '52');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message) { this.status = _status; this.message = _message; }; function translate(responseData) { try { var responseIntermediate = JSON.parse(responseData); var response = JSON.parse(responseIntermediate); if (response.status === \\\"completed\\\") { return new ApiResponse(\\\"SUCCESS\\\", response.uploadId); } else if (response.status === \\\"empty\\\") { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"No records found to add agents\\\"); } else if (response.status === \\\"upload_error\\\") { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"Some erroneous records were identified during the last operation.Please click on View Configurations, download excel file & check Errors column to review failed records.\\\"); } else if (response.status === \\\"validation_error\\\") { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"Validation failed for some records during the last operation. Please click on View Configurations, download excel file & check Errors column to review failed records.\\\"); } else return new ApiResponse(\\\"ERROR\\\", JSON.stringify(response)) } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '53');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try { var response = JSON.parse(responseData); if(response.Error !== undefined) { return new ApiResponse(\\\"ERROR\\\", response.Error); } if (response.errorCode !== undefined) { return new ApiResponse(\\\"ERROR\\\", response.errorMessage); } return new ApiResponse(\\\"SUCCESS\\\", response.uploadId); } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '54');
UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message) { this.status = _status; this.message = _message; }; function translate(responseData) { try { var responseIntermediate = JSON.parse(responseData); var response = JSON.parse(responseIntermediate); if (response.status === \\\"completed\\\") { return new ApiResponse(\\\"SUCCESS\\\", response.uploadId); } else if (response.status === \\\"empty\\\") { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"No records found to add agents\\\"); } else if (response.status === \\\"upload_error\\\") { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"Some erroneous records were identified during the last operation. Please click on View Configurations, download excel file & check Errors column to review failed records.\\\"); } else if (response.status === \\\"validation_error\\\") { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"Validation failed for some records during the last operation. Please click on View Configurations, download excel file & check Errors column to review failed records.\\\"); } else return new ApiResponse(\\\"ERROR\\\", JSON.stringify(response)) } catch (e) { return new ApiResponse(\\\"ERROR\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}' 
WHERE (`id` = '55');

-- CENTRAL #8004: Implementation of status polling for smart responses with api response code mappings - 30/07/2021

UPDATE `action` SET `response_definition` = '{\"entityResponseTranslator\": \"var smartAgentsErrorMessages={\\\"SmartResponseError_1\\\":\\\"Something went wrong while Uploading! please try after sometime.\\\",\\\"SmartResponseError_2\\\":\\\"Something went wrong while deleting. Please try after sometime or contact Administrator if problem persists\\\",\\\"SmartResponseError_3\\\":\\\"Something went wrong while fetching!\\\",\\\"SmartResponseError_4\\\":\\\"Something went wrong while fetching Result! please try after sometime\\\",\\\"SmartResponseError_5\\\":\\\"Unkonwn Error!\\\",\\\"SmartResponseError_6\\\":\\\"Something Went wrong please check your file and try again later!\\\",\\\"SmartResponseError_7\\\":\\\"Job Timed Out! Please upload again\\\",\\\"SmartResponseError_8\\\":\\\"Excel header missing \'Response Text\'\\\",\\\"SmartResponseError_9\\\":\\\"Excel header missing \'Tags\'\\\",\\\"SmartResponseError_10\\\":\\\"Excel header missing \'Scope Type\'\\\",\\\"SmartResponseError_11\\\":\\\"Excel header missing \'Scope Id\'\\\",\\\"SmartResponseError_12\\\":\\\"Excel header has \'Response Title\' and \'Tags\'! only Tags are allowed\\\",\\\"SmartResponseError_13\\\":\\\"Account Id cannot be Empty\\\",\\\"SmartResponseError_14\\\":\\\"Scope cannot be Empty\\\",\\\"SmartResponseError_15\\\":\\\"Scope Id cannot be Empty\\\",\\\"SmartResponseError_16\\\":\\\"Response Text cannot be Empty\\\",\\\"SmartResponseError_17\\\":\\\"Tags cannot be Empty\\\",\\\"SmartResponseError_18\\\":\\\"Only \'Account\' or \'Queue\' Scope is allowed\\\",\\\"SmartResponseError_19\\\":\\\"Tags Length cannot be more then 64 Characters\\\",\\\"SmartResponseError_20\\\":\\\"DB Connection issue\\\"};var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(result) { var htmlTags = [\\\"<html>\\\", \\\"</html>\\\", \\\"<body>\\\", \\\"</body>\\\", \\\"<textarea>\\\", \\\"</textarea>\\\"]; var resp = result; try { for(var i = 0; i < htmlTags.length; i++) { resp = resp.replace(htmlTags[i], \\\"\\\"); } var jsonRes = JSON.parse(resp); if(!jsonRes.success){ var errorList = []; jsonRes.responseList.forEach(function(current){errorList.push(smartAgentsErrorMessages[current])});  return new ApiResponse(\\\"ERROR\\\", \\\"There were error/s while uploading: \\\" + errorList.toString());} return new ApiResponse(\\\"SUCCESS\\\", \\\"Successfully Scheduled file upload at \\\" + Date.now()); } catch(error) { return new ApiResponse(\\\"Error\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\");}}\"}'
WHERE (`id` = '47');
INSERT INTO `action` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `definition_type`, `description`, `type`, `response_definition`, `configs`)
VALUES ('56', 'default.user', '2021-06-03 13:13:15.527428', 'Rhea.Fernandes@247.ai', '2021-08-02 01:04:52.314669', '{\"type\": \"REST\", \"method\": \"GET\", \"headers\": {\"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"uploadFile\": false, \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/smartresponse/uploadstatus\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) {  return \\\"\\\"; }\", \"preFetchDefinition\": null, \"getPathParamFromPageData\": false, \"prefetchRequiredForLiveOnly\": false}', 'CREATE', 'Get Smart Response Status', 'REST', '{\"entityResponseTranslator\": \"var smartAgentsErrorMessages = {\\\"SmartResponseError_1\\\":\\\"Something went wrong while Uploding! please try after sometime.\\\",\\\"SmartResponseError_2\\\":\\\"Somting went wrong while deleteing. Please try after sometime or contact Administrator if problem persist\\\",\\\"SmartResponseError_3\\\":\\\"Something went wrong while fetching!\\\",\\\"SmartResponseError_4\\\":\\\"Something went wrong while fetching Result! please try after sometime\\\",\\\"SmartResponseError_5\\\":\\\"Unkonwn Error!\\\",\\\"SmartResponseError_6\\\":\\\"Something Went wrong please check your file and try again later!\\\",\\\"SmartResponseError_7\\\":\\\"Job Timed Out! Please upload again\\\",\\\"SmartResponseError_8\\\":\\\"Excel header missing \'Response Text\'\\\",\\\"SmartResponseError_9\\\":\\\"Excel header missing \'Tags\'\\\",\\\"SmartResponseError_10\\\":\\\"Excel header missing \'Scope Type\'\\\",\\\"SmartResponseError_11\\\":\\\"Excel header missing \'Scope Id\'\\\",\\\"SmartResponseError_12\\\":\\\"Excel header has \'Response Title\' and \'Tags\'! only Tags are allowed\\\",\\\"SmartResponseError_13\\\":\\\"Account Id cannot be Empty\\\",\\\"SmartResponseError_14\\\":\\\"Scope cannot be Empty\\\",\\\"SmartResponseError_15\\\":\\\"Scope Id cannot be Empty\\\",\\\"SmartResponseError_16\\\":\\\"Response Text cannot be Empty\\\",\\\"SmartResponseError_17\\\":\\\"Tags cannot be Empty\\\",\\\"SmartResponseError_18\\\":\\\"Only \'Account\' or \'Queue\' Scope allowed\\\",\\\"SmartResponseError_19\\\":\\\"Tags Length cannot be more then 64 Characters\\\",\\\"SmartResponseError_20\\\":\\\"DB Connection issue\\\"}; var arrayContains = function(arr, keyword){for (var i=0; i < arr.length; i++){ if(arr[i] === keyword) return true;} return false; }; var ApiResponse = function(_status, _message) { this.status = _status; this.message = _message; }; function translate(responseData) { try { var response = JSON.parse(responseData); if (response.success) { return new ApiResponse(\\\"SUCCESS\\\", \\\"Successfully uploaded smart responses\\\"); } else if (!arrayContains(response.responseList, \\\"SCHEDULED\\\") && !arrayContains(response.responseList,\\\"INPROGRESS\\\")) { var errorList = []; response.responseList.forEach(function(current){errorList.push(smartAgentsErrorMessages[current])}); return new ApiResponse(\\\"ERROR_STOP\\\", \\\"There were error/s while uploading: \\\" + errorList.toString()); } else return new ApiResponse(\\\"ERROR\\\", \\\"The job is \\\" + response.responseList[0]); } catch (e) { return new ApiResponse(\\\"ERROR_STOP\\\", \\\"Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\\\"); } }\"}', '{\"POLL\": {\"type\": \"POLL\", \"retryCount\": 3000, \"retryInterval\": 30000}}');

INSERT INTO `action_workflow` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `action_id`, `activity_template_id`)
VALUES ('62', 'default.user', '2021-07-30 17:44:12.124342', 'default.user', '2021-07-30 17:44:12.124342', '56', 'smartResponse');
INSERT INTO `action_dependencies` (`action_id`, `dependent_action_id`)
VALUES ('56', '47');


-- Fix publish issue for context validation and fix poll action
UPDATE `action` SET `definition` = '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/x-www-form-urlencoded\", \"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"uploadFile\": false, \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/validator?entityObj=${body}\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env, prefetch) { var apiData = JSON.parse(pageData).createPropertyValidation_p0; apiData.key=\\\"\\\"; if(!apiData.validatorRule) {apiData.validatorRule=\\\"\\\"} if(!apiData.enumValues || apiData.enumValues.length==0) {apiData.enumValues=[\\\"\\\"]}  return JSON.stringify(apiData); }\", \"preFetchDefinition\": {}, \"getPathParamFromPageData\": false, \"prefetchRequiredForLiveOnly\": false}' 
WHERE (`id` = '43');
UPDATE `action` SET `definition` = '{\"type\": \"REST\", \"method\": \"GET\", \"headers\": {\"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"uploadFile\": false, \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/agents/upload/status/${uploadId}\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) {  return \\\"\\\"; }\", \"preFetchDefinition\": null, \"getPathParamFromPageData\": false, \"prefetchRequiredForLiveOnly\": false}' 
WHERE (`id` = '53');
UPDATE `action` SET `definition` = '{\"type\": \"REST\", \"method\": \"GET\", \"headers\": {\"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"uploadFile\": false, \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/agents/upload/status/${uploadId}\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env) {  return \\\"\\\"; }\", \"preFetchDefinition\": null, \"getPathParamFromPageData\": false, \"prefetchRequiredForLiveOnly\": false}' 
WHERE (`id` = '55');