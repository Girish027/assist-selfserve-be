
UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(apiData) { try { var val = JSON.parse(JSON.parse(apiData).data.entity); var ea = val.entityAttributes; var ebd = val.entityBaseData; var uiData = { \\\"tabsField\\\": [ { \\\"queueList\\\": ebd.entityId, \\\"queueName\\\": ebd.entityDisplayName, \\\"queueId\\\": ebd.entityId, \\\"queueDesc\\\": ea.queueDesc, \\\"queueTags\\\": [] }, { \\\"assistConfig\\\": { \\\"queueType\\\": ea.queueType } }, {\\\"queuefallback\\\":{ \\\"setQueueFallback\\\": \\\"Set the fallback queues for \\\" + ebd.entityDisplayName , \\\"queueType\\\": ea.queueType }} ] }; if (ea.tags && ea.tags.split(\\\",\\\") !== \\\"\\\") { uiData.tabsField[0].queueTags = ea.tags.split(\\\",\\\"); } } catch(e) { } return JSON.stringify(uiData); } \"}'
WHERE (`id` = '11');

/* Alert page data fetch */
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('82', 'default.user', '2019-06-13 12:24:46.000000', 'default.user', '2019-06-13 12:24:46.000000', 'updateQueues_p0', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\", \"componentClientId\", \"componentAccountId\", \"entity\"], \"constants\": {}}', '/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/routingalerts/entityType/QUEUE/entities/${entity}', '{\"objectTranslator\": \"function translate(apiData, entity, context, auxResponse) { try { var val = JSON.parse(apiData); var uiData; var auxResp = JSON.parse(auxResponse); if (val.length > 0) { var alert = val[0]; var condition = alert.triggerConditions.conditions; var operators = { GT: \\\">\\\", EQ: \\\"==\\\", LT: \\\"<\\\" }; var ruleBuilderdata = \\\"\\\"; var syncRuleBuilderData = \\\"(SLA15>90)\\\"; var asyncRuleBuilderData = \\\"(SLA60>90)\\\"; if (condition.length) { var oper = condition[0].operator; var value = parseInt(condition[0].value); ruleBuilderdata = \\\"(\\\" + condition[0].attribute.replace(/[{()}]/g, \\\"\\\") + operators[oper] + value + \\\")\\\"; } if (auxResp === \'LIVE_CHAT\') { syncRuleBuilderData = ruleBuilderdata; } else { asyncRuleBuilderData = ruleBuilderdata } uiData = { \\\"tabsField\\\": [ {}, {}, { \\\"queuefallback\\\": { \\\"alertId\\\": alert.alertId || \\\"\\\", \\\"setQueueFallbackEnabled\\\": alert.isAlertEnabled || false, \\\"name\\\": alert.alertName || \\\"\\\", \\\"description\\\": alert.alertDescription || \\\"\\\", \\\"addcond\\\": [ { \\\"syncRuleBuilder\\\": syncRuleBuilderData, \\\"asyncRuleBuilder\\\": asyncRuleBuilderData, \\\"fallbackQueuesLive\\\": alert.alertActionData.values ? alert.alertActionData.values[0] : \\\"\\\", \\\"fallbackQueuesMsg\\\": alert.alertActionData.values ? alert.alertActionData.values[0] : \\\"\\\" } ] } } ] }; } else { uiData = { \\\"tabsField\\\": [ {}, {}, { \\\"queuefallback\\\": { \\\"alertId\\\": \\\"\\\", \\\"setQueueFallbackEnabled\\\": false, \\\"name\\\": \\\"\\\", \\\"description\\\": \\\"\\\", \\\"addcond\\\": [ { \\\"syncRuleBuilder\\\": \\\"(SLA15>90)\\\", \\\"asyncRuleBuilder\\\": \\\"(SLA60>90)\\\", \\\"fallbackQueuesLive\\\": \\\"\\\", \\\"fallbackQueuesMsg\\\": \\\"\\\" } ] } } ] }; } } catch(e) { } return JSON.stringify(uiData);}\"}', 'JS', 'PAGE_DATA_VALUE', 'assist', '1');

/* Auxiliary response to get the queueType */
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('89', 'default.user', '2021-09-09 12:24:46.000000', 'Dhrishya.R@247.ai', '2021-09-09 12:24:46.000000', 'updateQueues_p0', '{\"apikey\": \"KtbDtdYYb7EUD4oajYCM8l9Nh7L0AgEc\"}', '{\"contexts\": [\"entity\"], \"constants\": {}}', '/v1/ohs/adminEntity/get?entityType=queue&entityId=${entity}', '{\"objectTranslator\": \"function translate(apiData) { try { var val = JSON.parse(JSON.parse(apiData).data.entity); var ea = val.entityAttributes; } catch(e) { } return JSON.stringify(ea.queueType); }\"}', 'JS', 'AUXILIARY_RESPONSE', 'ohs', '0');

/* listing the alert attributes in the rule builder for live queue*/
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('83', 'default.user', '2021-05-21 12:24:46.000000', 'Dhrishya.R@247-inc.com', '2021-07-20 22:51:21.462848', 'listAlertAttributesSync', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\", \"componentClientId\", \"componentAccountId\"], \"constants\": {}, \"queryParams\": null}', '/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/routingalerts/attributes?entityType=QUEUE', '{\"objectTranslator\": \"function translate(values){ try { values = JSON.parse(values); var properties={list:[]}; var operator = {GT: \\\"greater\\\", EQ: \\\"equal\\\", LT: \\\"less\\\"}; var attributeType = {INTEGER: \\\"number\\\", STRING: \\\"text\\\"}; var placeholder = \\\"Values entered will be taken in percentage\\\"; values.forEach(function (item){if(item.properties.queueType && item.properties.queueType == \\\"SYNC\\\") { var value = []; item.operatorsAllowed.forEach(function (op){ value.push(operator[op]) }); var key = item.attributeName.replace(/[{()}]/g, \\\"\\\"); var alertAttributeType = attributeType[item.alertAttributeValueType]; var data = \'(\'+ key + \'>\' + 90+\')\'; var enumNamesValues = { key: key,fieldName: item.attributeName, operators: value, fieldType: alertAttributeType, placeholder: placeholder, formData: data}; properties.list.push(enumNamesValues); }})} catch(e){} return JSON.stringify(properties);}\"}', 'JS', 'FIELD_OPTIONS', 'assist', '0');

/* listing the alert attributes in the rule builder for msg queue*/
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('84', 'default.user', '2021-05-21 12:24:46.000000', 'Dhrishya.R@247-inc.com', '2021-07-20 22:51:21.462848', 'listAlertAttributesAsync', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\", \"componentClientId\", \"componentAccountId\"], \"constants\": {}, \"queryParams\": null}', '/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/routingalerts/attributes?entityType=QUEUE', '{\"objectTranslator\": \"function translate(values){ try { values = JSON.parse(values); var properties={list:[]}; var operator = {GT: \\\"greater\\\", EQ: \\\"equal\\\", LT: \\\"less\\\"}; var attributeType = {INTEGER: \\\"number\\\", STRING: \\\"text\\\"}; var placeholder = \\\"Values entered will be taken in percentage\\\"; values.forEach(function (item){if(item.properties.queueType && item.properties.queueType == \\\"ASYNC\\\") { var value = []; item.operatorsAllowed.forEach(function (op){ value.push(operator[op]) }); var key = item.attributeName.replace(/[{()}]/g, \\\"\\\"); var alertAttributeType = attributeType[item.alertAttributeValueType]; var data = \'(\'+ key + \'>\' + 90+\')\'; var enumNamesValues = { key: key,fieldName: item.attributeName, operators: value, fieldType: alertAttributeType, placeholder: placeholder, formData: data}; properties.list.push(enumNamesValues);}})} catch(e){} return JSON.stringify(properties); }\"}', 'JS', 'FIELD_OPTIONS', 'assist', '0');

/* field options for msg queues */
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('85', 'default.user', '2019-06-13 12:24:46.000000', 'Dhrishya.R@247-inc.com', '2021-07-19 10:29:30.212826', 'msgQueue', '{\"apikey\": \"KtbDtdYYb7EUD4oajYCM8l9Nh7L0AgEc\"}', '{\"contexts\": [\"accountId\"], \"constants\": {}, \"queryParams\": null}', '/v1/ohs/adminEntity/listByAccount?entityType=queue&accountId=${accountId}-account-default', '{\"objectTranslator\": \"function translate(values){var entities={enum:[], enumNames:[]}; var list=[]; try{values=JSON.parse(values); list=JSON.parse(values.data.list); list.forEach(function(item){if(item.entityAttributes.queueType && item.entityAttributes.queueType.toLocaleUpperCase() == \\\"MESSAGING\\\"){entities.enum.push(item.entityBaseData.entityId); entities.enumNames.push(item.entityBaseData.entityDisplayName); }});}catch(e){}return JSON.stringify(entities);}\"}', 'JS', 'FIELD_OPTIONS', 'ohs', '0');

/* field options for live queues */
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('86', 'default.user', '2019-06-13 12:24:46.000000', 'Dhrishya.R@247-inc.com', '2021-07-19 10:29:30.213825', 'liveQueue', '{\"apikey\": \"KtbDtdYYb7EUD4oajYCM8l9Nh7L0AgEc\"}', '{\"contexts\": [\"accountId\"], \"constants\": {}, \"queryParams\": null}', '/v1/ohs/adminEntity/listByAccount?entityType=queue&accountId=${accountId}-account-default', '{\"objectTranslator\": \"function translate(values){var entities={enum:[], enumNames:[]}; var list=[]; try{values=JSON.parse(values); list=JSON.parse(values.data.list); list.forEach(function(item){if(item.entityAttributes.queueType && item.entityAttributes.queueType.toLocaleUpperCase() == \\\"LIVE_CHAT\\\"){entities.enum.push(item.entityBaseData.entityId); entities.enumNames.push(item.entityBaseData.entityDisplayName); }});}catch(e){}return JSON.stringify(entities);}\"}', 'JS', 'FIELD_OPTIONS', 'ohs', '0');

/* page data for createQueue */
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('87', 'default.user', '2019-06-13 12:24:46.000000', 'Dhrishya.R@247-inc.com', '2021-07-19 10:29:30.213825', 'createQueues_p0', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\", \"componentClientId\", \"componentAccountId\"], \"constants\": {}, \"queryParams\": null}', '/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/clientstartupconfig/NEMO_intelligentRouting', '{\"objectTranslator\": \"function translate(apiData){ try { apiData = JSON.parse(apiData); var uiData = { tabsField: [ {}, { assistConfig: { interLob: { outboundLob: \\\"false\\\", acceptInterLob: \\\"false\\\" }, mailer: { visitorConfig: \\\"DEFAULT\\\", agentConfig: \\\"DEFAULT\\\" }, fileTransfer: { FTVisitor: \\\"DENY\\\" }, typingEnabled: \\\"true\\\", inviteMgmt: { key: \\\"\\\", safetyfactor: \\\"\\\", caModelType: \\\"INVITE_MODEL\\\", invites: 1, expiryInterval: \\\"45\\\" }, typingTimeout: 5, queueType: \\\"LIVE_CHAT\\\", isAccountQueue: \\\"false\\\", AgentResponseObj: { agentResponseEnabled: \\\"false\\\" }, VisitorInactivityObj: { visitorInactivityEnabled: \\\"false\\\" }, crmIntg: { crmScriptContent: \\\"\\\", crmLaunchBtn: \\\"\\\", crmAppId: \\\"\\\" } } }, {} ]}; uiData.queueFallbackEnabled = apiData.configValue.toString(); } catch(e) { }return JSON.stringify(uiData);}\"}', 'JS', 'PAGE_DATA_VALUE', 'assist', '0');

/* page data to fetch the config value from account config */
INSERT INTO `fetch_config_template` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `fetch_for`, `headers`, `params`, `relativeurl`, `resp_api_to_resp_ui`, `translator_type`, `type`, `service_id`, `execution_order`) VALUES ('88', 'default.user', '2019-06-13 12:24:46.000000', 'Dhrishya.R@247-inc.com', '2021-07-19 10:29:30.213825', 'updateQueues_p0', '{\"GenerateAuthToken\": \"Bearer \"}', '{\"contexts\": [\"clientId\", \"accountId\", \"componentClientId\", \"componentAccountId\"], \"constants\": {}, \"queryParams\": null}', '/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/clientstartupconfig/NEMO_intelligentRouting', '{\"objectTranslator\": \"function translate(apiData){ try { apiData = JSON.parse(apiData); var uiData = {}; uiData.queueFallbackEnabled = apiData.configValue.toString(); } catch(e) { } return JSON.stringify(uiData);}\"}', 'JS', 'PAGE_DATA_VALUE', 'assist', '0');

/* sessionTimeout listing property */
UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(values){ values = JSON.parse(values); var items = values.data.items; var properties={list:[]}; try{ items.forEach(function (item){ var enumNamesValues = { fieldName: item.varName, operators: [ \\\"equal\\\",\\\"not_equal\\\"], fieldType: \\\"text\\\" }; properties.list.push(enumNamesValues); }) } catch(e){} return JSON.stringify(properties); }\"}'
WHERE (`id` = '63');

/* update alert*/
INSERT INTO `action` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `definition_type`, `description`, `type`, `response_definition`, `configs`) VALUES ('57', 'default.user', '2021-03-01 13:13:15.527428', 'Dhrishya.R@247-inc.com', '2021-09-03 11:11:49.359910', '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/json\", \"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"uploadFile\": false, \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/routingalerts/entityType/QUEUE/entities/${entity}\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env, prefetch) { try { pageData = JSON.parse(pageData).updateQueues_p0; var uiData = pageData.tabsField[2].queuefallback; var str = \\\"\\\"; if (uiData.queueType == \\\"LIVE_CHAT\\\") { str = uiData.addcond[0].syncRuleBuilder || \\\"SLA15>90\\\"; } else { str = uiData.addcond[0].asyncRuleBuilder || \\\"SLA60>90\\\"; } var fallbackQueues = []; var operators = { \\\">\\\": \\\"GT\\\", \\\"==\\\": \\\"EQ\\\", \\\"<\\\": \\\"LT\\\" }; var oper = [\\\">\\\", \\\"<\\\", \\\"==\\\"]; var fieldName = { SLA15: \\\"SLA(15)\\\", SLA60: \\\"SLA(60)\\\" }; var operString = \\\"\\\"; var length = str.length - 1; var index; oper.forEach(function (item) { if (str.search(item) != -1) { index = str.indexOf(item); operString = item; } }); var word1 = str.slice(1, index); var word2 = str.slice(index + (operString.length), length); var data = [{ \\\"attribute\\\": fieldName[word1], \\\"type\\\": \\\"STRING\\\", \\\"operator\\\": operators[operString], \\\"value\\\": word2 }]; if (uiData.queueType == \\\"LIVE_CHAT\\\") { if (uiData.addcond[0].fallbackQueuesLive) { fallbackQueues.push(uiData.addcond[0].fallbackQueuesLive); } } else { if (uiData.addcond[0].fallbackQueuesMsg) { fallbackQueues.push(uiData.addcond[0].fallbackQueuesMsg) } } var apiPayload = [ { \\\"action\\\": \\\"add\\\", \\\"data\\\": { \\\"alertId\\\": \\\"\\\", \\\"alertName\\\": uiData.name || \\\"alertName\\\", \\\"alertDescription\\\": uiData.description || \\\"alertDesc\\\", \\\"executionWindow\\\": \\\"*/15****\\\", \\\"restorePercentage\\\": 0, \\\"featureName\\\": \\\"QUEUE_FALLBACK\\\", \\\"entityType\\\": \\\"QUEUE\\\", \\\"alertType\\\": \\\"TRIGGER\\\", \\\"alertAction\\\": \\\"NOTIFY\\\", \\\"alertActionData\\\": { \\\"actionEntity\\\": \\\"QUEUE\\\", \\\"values\\\": fallbackQueues || [] }, \\\"isAlertEnabled\\\": uiData.setQueueFallbackEnabled || false, \\\"version\\\": 0, \\\"triggerConditions\\\": { \\\"match\\\": \\\"ALL\\\", \\\"conditions\\\": data } } } ]; if (uiData.alertId) { apiPayload[0].action = \\\"update\\\"; apiPayload[0].data.alertId = uiData.alertId; } else { delete apiPayload[0].data.alertId; } } catch(e) { } return JSON.stringify(apiPayload);}\", \"urlParamsEncoded\": false, \"preFetchDefinition\": null, \"getPathParamFromPageData\": false, \"prefetchRequiredForLiveOnly\": false}', 'UPDATE', 'Update alert configurations', 'REST', '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'SUCCESS\'); } else { return new ApiResponse(\'Error\', \'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists! \'); } } \"}', '{}');

INSERT INTO `action_workflow` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `action_id`, `activity_template_id`) VALUES ('63', 'default.user', '2021-03-25 22:44:15.136579', 'default.user', '2021-03-25 22:44:15.136579', '57', 'queues');

INSERT INTO `action_dependencies` (`action_id`, `dependent_action_id`) VALUES ('57', '25');

/* create alert*/
INSERT INTO `action` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `definition`, `definition_type`, `description`, `type`, `response_definition`, `configs`) VALUES ('58', 'default.user', '2021-03-01 13:13:15.527428', 'Dhrishya.R@247-inc.com', '2021-09-05 23:06:36.516221', '{\"type\": \"REST\", \"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/json\", \"GenerateAuthToken\": \"Bearer \"}, \"serviceId\": \"assist\", \"uploadFile\": false, \"idLookupKeys\": null, \"relativePath\": \"/en/hierarchy/rest/clients/${componentClientId}/accounts/${componentAccountId}/routingalerts/entityType/QUEUE/entities/${entity}\", \"bodyDefinition\": {}, \"requestBodyKey\": null, \"restClientType\": null, \"idLookupRequired\": false, \"objectTranslator\": \"function translate(pageData, entityId, clientId, accountId, env, prefetch) { try { pageData = JSON.parse(pageData).createQueues_p0; var fieldName = { SLA15: \\\"SLA(15)\\\", SLA60: \\\"SLA(60)\\\" }; var word1 = pageData.tabsField[1].assistConfig.queueType === \'LIVE_CHAT\' ? \\\"SLA15\\\" : \\\"SLA60\\\"; var apiPayload = [ { \\\"action\\\": \\\"add\\\", \\\"data\\\": { \\\"alertName\\\": \\\"alertName\\\", \\\"alertDescription\\\": \\\"alertDesc\\\", \\\"executionWindow\\\": \\\"*/15****\\\", \\\"restorePercentage\\\": 0, \\\"featureName\\\": \\\"QUEUE_FALLBACK\\\", \\\"entityType\\\": \\\"QUEUE\\\", \\\"alertType\\\": \\\"TRIGGER\\\", \\\"alertAction\\\": \\\"NOTIFY\\\", \\\"alertActionData\\\": { \\\"actionEntity\\\": \\\"QUEUE\\\", \\\"values\\\": [] }, \\\"isAlertEnabled\\\": false, \\\"version\\\": 0, \\\"triggerConditions\\\": { \\\"match\\\": \\\"ALL\\\", \\\"conditions\\\": [ { \\\"attribute\\\": fieldName[word1], \\\"type\\\": \\\"STRING\\\", \\\"operator\\\": \\\"GT\\\", \\\"value\\\": \\\"90\\\" } ] } } } ]; if (pageData.tabsField[2].queuefallback) { var uiData = pageData.tabsField[2].queuefallback; var str = \\\"\\\"; var word2 = \\\"\\\"; var data = []; var fallbackQueues = []; var operators = { \\\">\\\": \\\"GT\\\", \\\"==\\\": \\\"EQ\\\", \\\"<\\\": \\\"LT\\\" }; var oper = [\\\">\\\", \\\"<\\\", \\\"==\\\"]; var operString = \\\"\\\"; var index; if (uiData.addcond) { if (uiData.queueType == \\\"LIVE_CHAT\\\") { str = uiData.addcond[0].syncRuleBuilder; fallbackQueues.push(uiData.addcond[0].fallbackQueuesLive) } else { str = uiData.addcond[0].asyncRuleBuilder; fallbackQueues.push(uiData.addcond[0].fallbackQueuesMsg) } } else { str = uiData.queueType == \\\"LIVE_CHAT\\\" ? \\\"(SLA15>90)\\\" : \\\"(SLA60>90)\\\"; } var length = str.length - 1; oper.forEach(function (item) { if (str.search(item) != -1) { index = str.indexOf(item); operString = item; } }); word1 = str.slice(1, index); word2 = str.slice(index + (operString.length), length); data = [{ \\\"attribute\\\": fieldName[word1], \\\"type\\\": \\\"STRING\\\", \\\"operator\\\": operators[operString], \\\"value\\\": word2 }]; apiPayload[0].data.alertName = uiData.name || \\\"alertName\\\"; apiPayload[0].data.alertDescription = uiData.description || \\\"alertDesc\\\"; apiPayload[0].data.isAlertEnabled = uiData.setQueueFallbackEnabled || false; apiPayload[0].data.alertActionData.values = fallbackQueues; apiPayload[0].data.triggerConditions.conditions = data; } } catch(e) { } return JSON.stringify(apiPayload);}\", \"urlParamsEncoded\": false, \"preFetchDefinition\": null, \"getPathParamFromPageData\": false, \"prefetchRequiredForLiveOnly\": false}', 'CREATE', 'Create alert configurations', 'REST', '{\"entityResponseTranslator\": \"var ApiResponse = function(_status, _message){ this.status = _status; this.message = _message; }; function translate(responseData) { try{ if(!responseData){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } var uiData = JSON.parse(responseData); if(uiData != null ){ return new ApiResponse(\'SUCCESS\', \'SUCCESS\'); } else { return new ApiResponse(\'Error\', \'System error while publishing\'); } }catch(e){ return new ApiResponse(\'ERROR\', \'Failed to publish activity! Please try again or contact the Administrator, if the issue persists!\'); } } \"}', '{}');

INSERT INTO `action_workflow` (`id`, `created_by`, `created_on`, `last_updated_by`, `last_updated_on`, `action_id`, `activity_template_id`) VALUES ('64', 'default.user', '2021-03-25 22:44:15.136579', 'default.user', '2021-03-25 22:44:15.136579', '58', 'queues');

INSERT INTO `action_dependencies` (`action_id`, `dependent_action_id`) VALUES ('58', '50');

/* Default value in selectlist for fallback queues */

UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(values){var entities={enum:[\\\"\\\"], enumNames:[\\\"Select\\\"]}; var list=[]; try{values=JSON.parse(values); list=JSON.parse(values.data.list); list.forEach(function(item){if(item.entityAttributes.queueType && item.entityAttributes.queueType.toLocaleUpperCase() == \\\"LIVE_CHAT\\\"){entities.enum.push(item.entityBaseData.entityId); entities.enumNames.push(item.entityBaseData.entityDisplayName); }});}catch(e){}return JSON.stringify(entities);}\"}' WHERE (`id` = '86');
UPDATE `fetch_config_template` SET `resp_api_to_resp_ui` = '{\"objectTranslator\": \"function translate(values){var entities={enum:[\\\"\\\"], enumNames:[\\\"Select\\\"]}; var list=[]; try{values=JSON.parse(values); list=JSON.parse(values.data.list); list.forEach(function(item){if(item.entityAttributes.queueType && item.entityAttributes.queueType.toLocaleUpperCase() == \\\"MESSAGING\\\"){entities.enum.push(item.entityBaseData.entityId); entities.enumNames.push(item.entityBaseData.entityDisplayName); }});}catch(e){}return JSON.stringify(entities);}\"}' WHERE (`id` = '85');
